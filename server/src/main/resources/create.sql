DROP TABLE Lumber IF EXISTS;
DROP TABLE Timber IF EXISTS;
DROP TABLE Orders IF EXISTS;
DROP TABLE Task IF EXISTS;
DROP TABLE ASSIGNMENT IF EXISTS;

CREATE TABLE TIMBER (
  ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  FESTMETER DOUBLE NOT NULL,
  AMOUNT INT NOT NULL,
  LENGTH INT NOT NULL,
  QUALITY VARCHAR (10),
  DIAMETER INT NOT NULL,
  PRICE INT NOT NULL,
  LAST_EDITED TIMESTAMP
);

create table LUMBER(
ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
lager varchar(30) NOT NULL,
description varchar(50) NOT NULL,
finishing varchar(30) NOT NULL,
wood_type varchar(20) NOT NULL,
quality varchar(20) NOT NULL,
size integer NOT NULL CHECK(size>0),
width integer NOT NULL CHECK(width>0),
length integer NOT NULL CHECK(length>0),
quantity integer NOT NULL CHECK(quantity>0),
reserved_quantity integer NOT NULL CHECK(reserved_quantity>0),
delivered_quantity integer NOT NULL CHECK(delivered_quantity>0),
all_reserved boolean NOT NULL,
all_delivered boolean NOT NULL
);

create table Orders (
ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
customer_name varchar(50) NOT NULL,
customer_address varchar(50) NOT NULL,
customer_uid varchar(10) NOT NULL,
order_date datetime NOT NULL,
summe integer NOT NULL,
isPaidFlag boolean NOT NULL,
isDoneFlag boolean NOT NULL
);

CREATE TABLE TASK (
  ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  ORDERID INT NOT NULL,
  DESCRIPTION VARCHAR(50),
  FINISHING VARCHAR(15),
  WOOD_TYPE VARCHAR(10),
  QUALITY VARCHAR(10),
  SIZE INT NOT NULL,
  WIDTH INT NOT NULL,
  LENGTH INT NOT NULL,
  QUANTITY INT,
  PRODUCED_QUANTITY INT,
  DONE BIT DEFAULT 0,
  DELETED BIT DEFAULT 0,
  FOREIGN KEY (ORDERID) REFERENCES ORDERS(ID)
);

create table ASSIGNMENT(
ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
creation_date Datetime NOT NULL,
amount integer NOT NULL,
box_ID integer REFERENCES TIMBER(ID),
isDone boolean NOT NULL
);
